<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯æ—¥æ‰“å¡æ¸¸æˆ</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
        }
        
        .container {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            max-width: 500px;
            width: 90%;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .checkin-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
        }
        
        .checkin-btn:hover {
            background: #ff5252;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6);
        }
        
        .checkin-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .streak-info {
            margin: 20px 0;
            font-size: 1.2em;
        }
        
        .last-checkin {
            margin-top: 20px;
            font-style: italic;
            opacity: 0.8;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #667eea, #764ba2);
            margin: 15% auto;
            padding: 40px;
            border-radius: 20px;
            width: 80%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease;
            color: white;
            border: 3px solid #fff;
        }
        
        .close {
            color: white;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }
        
        .blessing-text {
            font-size: 1.4em;
            margin: 20px 0;
            line-height: 1.6;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            opacity: 0.7;
            animation: fall linear forwards;
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ æ¯æ—¥æ‰“å¡</h1>
        <p>åšæŒæ¯å¤©æ‰“å¡ï¼Œè·å¾—ä¸“å±ç¥ç¦ï¼</p>
        
        <div class="streak-info">
            <p>è¿ç»­æ‰“å¡å¤©æ•°: <span id="streakCount">0</span> å¤©</p>
        </div>
        
        <button id="checkinBtn" class="checkin-btn">ç‚¹å‡»æ‰“å¡</button>
        
        <div id="lastCheckin" class="last-checkin"></div>
    </div>
    
    <!-- ç¥ç¦è¯­å¼¹çª— -->
    <div id="blessingModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>ğŸ‰ æ‰“å¡æˆåŠŸï¼</h2>
            <div class="blessing-text" id="blessingText"></div>
            <p>ä»Šå¤©æ˜¯ç¾å¥½çš„ä¸€å¤©ï¼Œç»§ç»­åŠ æ²¹ï¼</p>
        </div>
    </div>

    <script>
        // ç¥ç¦è¯­æ–‡æ¡ˆåº“
        const blessings = [
            "ä»Šå¤©çš„åŠªåŠ›ï¼Œæ˜¯å¹¸è¿çš„ä¼ç¬”ï¼Œæ„¿ä½ ä»Šæ—¥æ”¶è·æ»¡æ»¡ï¼",
            "æ¯ä¸€ä¸ªæ¸…æ™¨éƒ½æ˜¯æ–°çš„å¼€å§‹ï¼Œæ„¿ä½ çš„æ¯ä¸€å¤©éƒ½å……æ»¡å¸Œæœ›ï¼",
            "åšæŒæ‰“å¡çš„ä½ çœŸæ£’ï¼Œæ„¿ä½ æ‰€æœ‰çš„æ¢¦æƒ³éƒ½èƒ½æˆçœŸï¼",
            "ä»Šæ—¥ä»½çš„å¥½è¿å·²å……å€¼ï¼Œè¯·æ³¨æ„æŸ¥æ”¶ï¼",
            "é˜³å…‰æ­£å¥½ï¼Œå¾®é£ä¸ç‡¥ï¼Œæ„¿ä½ çš„å¿ƒæƒ…ä¹Ÿå¦‚æ­¤ç¾å¥½ï¼",
            "æ¯ä¸€æ¬¡åšæŒéƒ½æ˜¯å¯¹è‡ªå·±çš„æ‰¿è¯ºï¼Œæ„¿ä½ è¶Šæ¥è¶Šä¼˜ç§€ï¼",
            "æ–°çš„ä¸€å¤©ï¼Œæ–°çš„æœºé‡ï¼Œæ„¿ä½ æŠŠæ¡ä½æ¯ä¸€ä¸ªå¯èƒ½ï¼",
            "æ„¿ä½ çš„ç¬‘å®¹å¦‚æ™¨å…‰èˆ¬ç¿çƒ‚ï¼Œå¿ƒæƒ…å¦‚æ˜¥é£èˆ¬èˆ’ç•…ï¼",
            "åŠªåŠ›çš„äººè¿æ°”ä¸ä¼šå¤ªå·®ï¼Œæ„¿ä½ è¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾…ï¼",
            "ä»Šå¤©çš„ä»˜å‡ºï¼Œæ˜¯ä¸ºäº†æ˜å¤©æ›´å¥½çš„è‡ªå·±ï¼ŒåŠ æ²¹ï¼",
            "ä¿æŒçƒ­çˆ±ï¼Œå¥”èµ´å±±æµ·ï¼Œæ„¿ä½ çš„äººç”Ÿç²¾å½©çº·å‘ˆï¼",
            "æ¯ä¸€ä¸ªå¹³å‡¡çš„æ—¥å­ï¼Œéƒ½å€¼å¾—è¢«è®¤çœŸå¯¹å¾…ï¼Œç¥ä½ å¼€å¿ƒï¼",
            "æ„¿ä½ çš„æ¯ä¸€ä»½åŠªåŠ›éƒ½è¢«è®¤å¯ï¼Œæ¯ä¸€ä»½ä»˜å‡ºéƒ½æœ‰å›æŠ¥ï¼",
            "ç”Ÿæ´»è™½æœ‰æŒ‘æˆ˜ï¼Œä½†ä½ æ¯”å›°éš¾æ›´å¼ºå¤§ï¼Œç›¸ä¿¡è‡ªå·±ï¼",
            "ä»Šå¤©ä¹Ÿè¦å¼€å¿ƒå‘€ï¼Œæ„¿æ‰€æœ‰ç¾å¥½å¦‚çº¦è€Œè‡³ï¼"
        ];
        
        // DOMå…ƒç´ 
        const checkinBtn = document.getElementById('checkinBtn');
        const streakCount = document.getElementById('streakCount');
        const lastCheckin = document.getElementById('lastCheckin');
        const modal = document.getElementById('blessingModal');
        const blessingText = document.getElementById('blessingText');
        const closeBtn = document.querySelector('.close');
        
        // è·å–æœ¬åœ°å­˜å‚¨çš„æ•°æ®
        function getStoredData() {
            const data = localStorage.getItem('dailyCheckin');
            return data ? JSON.parse(data) : null;
        }
        
        // ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
        function saveData(data) {
            localStorage.setItem('dailyCheckin', JSON.stringify(data));
        }
        
        // è·å–éšæœºç¥ç¦è¯­
        function getRandomBlessing() {
            const randomIndex = Math.floor(Math.random() * blessings.length);
            return blessings[randomIndex];
        }
        
        // åˆ›å»ºå½©å¸¦åŠ¨ç”»æ•ˆæœ
        function createConfetti() {
            const container = document.body;
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                container.appendChild(confetti);
                
                // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }
        
        // åˆå§‹åŒ–é¡µé¢
        function initPage() {
            const storedData = getStoredData();
            
            if (storedData) {
                streakCount.textContent = storedData.streak;
                
                // æ£€æŸ¥æ˜¯å¦å·²ç»æ‰“å¡è¿‡ä»Šå¤©
                const today = new Date().toDateString();
                if (storedData.lastCheckinDate === today) {
                    checkinBtn.disabled = true;
                    checkinBtn.textContent = 'ä»Šæ—¥å·²æ‰“å¡';
                    lastCheckin.textContent = `æœ€åæ‰“å¡: ${storedData.lastCheckinDisplay}`;
                } else {
                    // æ£€æŸ¥æ˜¯å¦æ˜¯è¿ç»­æ‰“å¡
                    const yesterday = new Date();
                    yesterday.setDate(yesterday.getDate() - 1);
                    
                    if (storedData.lastCheckinDate !== yesterday.toDateString()) {
                        // å¦‚æœä¸æ˜¯è¿ç»­æ‰“å¡ï¼Œåˆ™é‡ç½®è¿ç»­å¤©æ•°
                        storedData.streak = 0;
                        saveData(storedData);
                        streakCount.textContent = '0';
                    }
                }
            } else {
                // é¦–æ¬¡ä½¿ç”¨ï¼Œåˆå§‹åŒ–æ•°æ®
                const initialData = {
                    streak: 0,
                    lastCheckinDate: null,
                    lastCheckinDisplay: ''
                };
                saveData(initialData);
            }
        }
        
        // æ‰§è¡Œæ‰“å¡æ“ä½œ
        function performCheckin() {
            const storedData = getStoredData();
            const today = new Date();
            const todayStr = today.toDateString();
            const displayDate = today.getFullYear() + '-' + 
                               String(today.getMonth() + 1).padStart(2, '0') + '-' + 
                               String(today.getDate()).padStart(2, '0');
            
            // æ›´æ–°è¿ç»­å¤©æ•°
            let yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            
            if (!storedData.lastCheckinDate || storedData.lastCheckinDate === yesterday.toDateString()) {
                storedData.streak += 1;
            } else if (storedData.lastCheckinDate === todayStr) {
                // å·²ç»æ‰“è¿‡å¡äº†
                return;
            } else {
                // ä¸­æ–­äº†è¿ç»­ï¼Œé‡æ–°å¼€å§‹
                storedData.streak = 1;
            }
            
            storedData.lastCheckinDate = todayStr;
            storedData.lastCheckinDisplay = displayDate;
            
            saveData(storedData);
            
            // æ›´æ–°ç•Œé¢
            streakCount.textContent = storedData.streak;
            checkinBtn.disabled = true;
            checkinBtn.textContent = 'ä»Šæ—¥å·²æ‰“å¡';
            lastCheckin.textContent = `æœ€åæ‰“å¡: ${displayDate}`;
            
            // æ˜¾ç¤ºç¥ç¦è¯­
            showBlessing();
            
            // åˆ›å»ºåº†ç¥æ•ˆæœ
            createConfetti();
        }
        
        // æ˜¾ç¤ºç¥ç¦è¯­å¼¹çª—
        function showBlessing() {
            const blessing = getRandomBlessing();
            blessingText.textContent = blessing;
            modal.style.display = 'block';
        }
        
        // äº‹ä»¶ç›‘å¬å™¨
        checkinBtn.addEventListener('click', performCheckin);
        
        closeBtn.addEventListener('click', () => {
            modal.style.display = 'none';
        });
        
        window.addEventListener('click', (event) => {
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });
        
        // åˆå§‹åŒ–é¡µé¢
        initPage();
    </script>
</body>
</html>